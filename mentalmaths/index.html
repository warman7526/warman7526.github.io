<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MentalMaths</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <dialog modal>
            <div>You must select at least one type of question.</div>
            <button close-modal
                onclick="document.querySelector('[modal]').close()">OK</button>
        </dialog>
        <div id="container" class="center">

            <button onclick="turnAll(true)">Select All</button>
            <button onclick="turnAll(false)">Select None</button>
            <br /><br />

            <label class="switch">
                <input type="checkbox" id="add">
                <span class="slider round"></span>
            </label>Addition<br /><br />

            <label class="switch">
                <input type="checkbox" id="sub">
                <span class="slider round"></span>
            </label>Subtraction<br /><br />

            <label class="switch">
                <input type="checkbox" id="mul">
                <span class="slider round"></span>
            </label>Multiplication<br /><br />

            <label class="switch">
                <input type="checkbox" id="div">
                <span class="slider round"></span>
            </label>Division<br /><br />

            <label class="switch">
                <input type="checkbox" id="ind">
                <span class="slider round"></span>
            </label>Indecies<br /><br />

            <label class="switch">
                <input type="checkbox" id="rt">
                <span class="slider round"></span>
            </label>Roots<br /><br />

            <hr />

            <h3>Game Mode:</h3>
            <input type="radio" id="inf" name="gamemode" checked>Infinite
            <br />
            <input type="radio" id="n-7" name="gamemode">7 Questions
            <br />
            <input type="radio" id="n-20" name="gamemode">20 Questions
            <br />
            <input type="radio" id="n-50" name="gamemode">50 Questions
            <br />
            <input type="radio" id="n-100" name="gamemode">100 Questions
            <br />
            <input type="radio" id="t-3" name="gamemode">Time Trial (3s)
            <br />
            <input type="radio" id="t-5" name="gamemode">Time Trial (5s)
            <br />
            <input type="radio" id="t-10" name="gamemode">Time Trial (10s)
            <hr />
            <button class="err" id="start" onclick="start()">START</button>
            <hr />
            <small>v0.b_pre0</small>
        </div>
        <script>
            function turnAll(n){
                document.getElementById("add").checked = n;
                document.getElementById("sub").checked = n;
                document.getElementById("mul").checked = n;
                document.getElementById("div").checked = n;
                document.getElementById("ind").checked = n;
                document.getElementById("rt" ).checked = n;
            }
            var mode = ""
            var validate = function(){
                mode = ""
                if(document.getElementById("add").checked) mode += "a"
                if(document.getElementById("sub").checked) mode += "s"
                if(document.getElementById("mul").checked) mode += "m"
                if(document.getElementById("div").checked) mode += "d"
                if(document.getElementById("ind").checked) mode += "n"
                if(document.getElementById("rt" ).checked) mode += "r"
        
                if(mode == "") document.getElementById("start").classList.add("err") 
                else           document.getElementById("start").classList.remove("err") 

                }
                document.getElementsByTagName("html")[0].addEventListener("click",validate)
                var start = function(){
                if(mode==""){
                    document.querySelector("[modal]").showModal()
                }
                else{
                    var isNormal = false
                    var questions = 0;
                    if(document.querySelector("#n-20").checked){isNormal = true; questions = 20;}
                    else if(document.querySelector("#n-100").checked){isNormal = true; questions = 100;}
                    else if(document.querySelector("#n-7").checked){isNormal = true; questions = 7;}
                    else if(document.querySelector("#n-50").checked){isNormal = true; questions = 50;}
                    else if(document.querySelector("#t-3").checked){isNormal = true; questions = 300;isTimed = true;}
                    else if(document.querySelector("#t-5").checked){isNormal = true; questions = 500;isTimed = true;}
                    else if(document.querySelector("#t-10").checked){isNormal = true; questions = 1000;isTimed = true;}
                    console.log(questions)
                    window.location.href=`./test/?${mode.toUpperCase().split("").join("&")}${document.querySelector("#inf").checked?"&I":""}${isTimed?"&T":""}${isNormal?"&q="+questions.toString():""}`
                }
            }
        </script>
    </body>
</html>